<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "//www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="//www.w3.org/1999/xhtml" lang="ru"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="Robots" content="INDEX,FOLLOW"><title>Как выбрать или изготовить USB-хаб - RadioRadar</title><meta name="description" content="Как выбрать или изготовить USB-хаб"><meta name="author" content="Freelance Group"><meta name="yandex-verification" content="79e6d87eb7570e69"><meta name="google-site-verification" content="gkXQkgcQ5oKfDf7AJ2lOlvXymgdyGcbKwPOmb8-rrN0"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="shortcut icon" href="http://www.radioradar.net/favicon.ico"><link rel="stylesheet" href="%D0%9A%D0%B0%D0%BA%20%D0%B2%D1%8B%D0%B1%D1%80%D0%B0%D1%82%D1%8C%20%D0%B8%D0%BB%D0%B8%20%D0%B8%D0%B7%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20USB-%D1%85%D0%B0%D0%B1%20-%20RadioRadar_files/main.css" type="text/css"><script async="" src="%D0%9A%D0%B0%D0%BA%20%D0%B2%D1%8B%D0%B1%D1%80%D0%B0%D1%82%D1%8C%20%D0%B8%D0%BB%D0%B8%20%D0%B8%D0%B7%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20USB-%D1%85%D0%B0%D0%B1%20-%20RadioRadar_files/analytics.js"></script><script type="text/javascript" async="" src="%D0%9A%D0%B0%D0%BA%20%D0%B2%D1%8B%D0%B1%D1%80%D0%B0%D1%82%D1%8C%20%D0%B8%D0%BB%D0%B8%20%D0%B8%D0%B7%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20USB-%D1%85%D0%B0%D0%B1%20-%20RadioRadar_files/recaptcha__en.js"></script><script src="%D0%9A%D0%B0%D0%BA%20%D0%B2%D1%8B%D0%B1%D1%80%D0%B0%D1%82%D1%8C%20%D0%B8%D0%BB%D0%B8%20%D0%B8%D0%B7%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20USB-%D1%85%D0%B0%D0%B1%20-%20RadioRadar_files/api.js" async="" defer="defer"></script><script async="" src="%D0%9A%D0%B0%D0%BA%20%D0%B2%D1%8B%D0%B1%D1%80%D0%B0%D1%82%D1%8C%20%D0%B8%D0%BB%D0%B8%20%D0%B8%D0%B7%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20USB-%D1%85%D0%B0%D0%B1%20-%20RadioRadar_files/adsbygoogle.js"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-0990744275250206",enable_page_level_ads:!0});</script></head><body><script type="text/javascript">function init(){$(document).ready(function(){$("#informer").show(),$("a[href='#top']").click(function(){return $("html, body").animate({scrollTop:0},"slow"),!1}),$("#buter").click(function(){$("#menu").slideToggle("slow"),$("#subscribe").slideToggle("slow"),$("#rss").slideToggle("slow")}),$(".direct").show(),$("#sendBook").click(function(){$("#bookbuy").validate({event:"submit",rules:{firstname:"required",lastname:"required",email:{required:!0,email:!0}},messages:{firstname:"Введите свое имя",lastname:"Введите свою фамилию",otch:"Введите свое отчество",tel:"Введите контактный телефон",zipcode:"Введите индекс",email:{required:"Введите Email",minlength:"Введите валидный Email"}},success:function(e){e.html("&nbsp;").addClass("checked")}}).form()&&$.ajax({type:"POST",url:"/_ajax/sendOrder.php",data:$("#bookbuy").serialize(),success:function(e){alert("Ваш заказ будет отправлен по этому адресу")},dataType:"html"})})})}function AddBook(e){return $("#modalSolon").modal({overlayClose:!0,overlayCss:{backgroundColor:"#000"},containerCss:{height:"570px",width:"580px"}}),$("#FinalCost").html($("#price_"+e).html()),$("#DetailsBook").html($("#name_"+e).html()+"("+$("#author_"+e).html()+")"),$("input[id=bookId]").attr("value",e),!1}</script><div id="minwidth"><!-- FOR IE's MINWIDTH (900px) --><div id="container"><!-- HEADER --><div id="header"><div class="inner"><div id="h-menu"><a href="http://www.radioradar.net/" title="RadioRadar - Радиоэлектроника, даташиты, схемы"><img src="%D0%9A%D0%B0%D0%BA%20%D0%B2%D1%8B%D0%B1%D1%80%D0%B0%D1%82%D1%8C%20%D0%B8%D0%BB%D0%B8%20%D0%B8%D0%B7%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20USB-%D1%85%D0%B0%D0%B1%20-%20RadioRadar_files/home.png" alt="на главную" width="38" height="38"></a><a href="http://www.radioradar.net/sitemap/index.html" title="карта сайта"><img src="%D0%9A%D0%B0%D0%BA%20%D0%B2%D1%8B%D0%B1%D1%80%D0%B0%D1%82%D1%8C%20%D0%B8%D0%BB%D0%B8%20%D0%B8%D0%B7%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20USB-%D1%85%D0%B0%D0%B1%20-%20RadioRadar_files/map.png" alt="карта сайта" width="38" height="38"></a><a href="http://www.radioradar.net/en/index.html"><img src="%D0%9A%D0%B0%D0%BA%20%D0%B2%D1%8B%D0%B1%D1%80%D0%B0%D1%82%D1%8C%20%D0%B8%D0%BB%D0%B8%20%D0%B8%D0%B7%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20USB-%D1%85%D0%B0%D0%B1%20-%20RadioRadar_files/eng.png" alt="English version" width="38" height="38"></a></div><div id="h-article"><span class="strong-analog">Вы читаете:</span><h2>Как выбрать или изготовить USB-хаб</h2></div></div></div><div class="clr"></div><!-- SUHEADER MENU --><div id="subheader"><div class="inner"><ul><li><a href="http://www.radioradar.net/news/index.html" title="Новости электроники, радиотехники, электронных компонентов">Новости</a></li><li><a href="http://www.radioradar.net/about_project/index.html" title="Радиотехника и электроника - RadioRadar">О проекте</a></li><li><a href="http://www.radioradar.net/contacts/index.html" title="Контакты сайта RadioRadar">Контакты</a></li></ul></div></div><div id="search"><div class="inner"><fieldset><form action="/search.html" method="post"><label for="cs-search" class="hs-poisk">Поиск:</label><br><input id="cs-search" name="search" class="hs-input" type="text">&nbsp;<input src="%D0%9A%D0%B0%D0%BA%20%D0%B2%D1%8B%D0%B1%D1%80%D0%B0%D1%82%D1%8C%20%D0%B8%D0%BB%D0%B8%20%D0%B8%D0%B7%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20USB-%D1%85%D0%B0%D0%B1%20-%20RadioRadar_files/butt_arrow.gif" alt="Найти" name="" class="hs-searchbt" type="image"><br><input name="search-type" checked="checked" onclick="this.form.action = '/search.html'; document.getElementById('cs-search').name = 'search'" class="hs-radio" type="radio"><label>по сайту</label><input onclick="this.form.action = '/datasheet_search/index.html';  document.getElementById('cs-search').name = 'sWord'" name="search-type" class="hs-radio" type="radio"><label>datasheets</label><input name="searchPart" value="partsname" type="hidden"><input name="DataSheetSubmit" value="1" type="hidden"><input name="searchWay" value="start" type="hidden"><input name="Submit" value="1" type="hidden"></form></fieldset></div></div><div class="clr"></div><div id="navigation"><div id="logo"><a name="top" href="http://www.radioradar.net/" title="RadioRadar - Радиоэлектроника, даташиты, схемы"><img src="%D0%9A%D0%B0%D0%BA%20%D0%B2%D1%8B%D0%B1%D1%80%D0%B0%D1%82%D1%8C%20%D0%B8%D0%BB%D0%B8%20%D0%B8%D0%B7%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20USB-%D1%85%D0%B0%D0%B1%20-%20RadioRadar_files/logo.gif" alt="RadioRadar - Радиоэлектроника, даташиты, схемы" width="209" height="74"></a><span class="logo-line"><div id="buter" style="display: none;">Меню</div></span></div><div id="menu"><div class="inner"><ol><li><a href="http://www.radioradar.net/datasheet_search/index.html" title="Возможность скачать даташит (datasheet) в формате pdf электронных компонентов" class="menu-mark">Даташиты (Datasheets)</a></li><li><a href="http://www.radioradar.net/articles/index.html" title="Статьи радиоэлектронной тематики, техника измерений, аудио и видеотехника" class="menu-mark">Статьи, аналитика</a></li><li><a href="http://www.radioradar.net/user_manuals/index.html" title="Пользовательские инструкции, user manuals, руководства по эксплуатации электронной технике" class="">Инструкции, user manuals</a></li><li><a href="http://www.radioradar.net/archive_scheme/index.html" title="Принципиальные электрические схемы и сервис мануалы" class="menu-mark">Принципиальные схемы</a></li><li><a href="http://www.radioradar.net/programms/index.html" title="Программы: инженерные, САПР, анализаторы, для расчетов" class="">Программы</a></li><li><a href="http://www.radioradar.net/radiofan/index.html" title="Радиолюбительские схемы, разработки, технологии" class="menu-sel">Радиолюбителю</a></li><li><a href="http://www.radioradar.net/books/index.html" title="Микросхемы, транзисторы, связь, сети, интернет. Книги, продажа книг" class="">Книжная полка</a></li><li><a href="http://www.radioradar.net/hand_book/index.html" title="Справочная информация по электронным компонентам" class="">Справочник</a></li><li><a href="http://www.radioradar.net/glossary/index.html" title="Глоссарий терминов: электроника, радиотехника" class="">Глоссарий</a></li><li><a href="http://www.radioradar.net/repair_electronic_technics/index.html" title="Ремонт электроники: схемы, service manuals, статьи" class="menu-mark">Ремонт электроники</a></li><li><a href="http://www.radioradar.net/exhibitions/index.html" title="Календарь выставок радиоэлектронной и электротехнической тематики" class="">Выставки</a></li><li><a href="http://www.radioradar.net/articles_partners/index.html" title="Статьи радиоэлектронной тематики от наших партнеров" class="">Статьи, партнеры</a></li></ol></div></div><br><div id="subscribe"><div class="inner"><form action="/subscribe.html" method="post" style="margin: 0px;" onsubmit="return checkSubscribeForm(this)"><fieldset><div id="s-txt"><label for="s-name">Имя: </label> <input id="name" name="name" type="text"><br><label for="s-mail">E-mail:</label> <input id="email" name="email" type="text"><br></div><input id="list_3" name="list_id[]" value="3" type="checkbox"><label for="list_3">Последние новости</label><br><input id="list_4" name="list_id[]" value="4" type="checkbox"><label for="list_4">Анонсы статей</label><br><div id="s-button"><input value="Подписаться" name="Submit" class="button" type="submit"></div></fieldset></form></div></div></div><div id="wrapper"><div id="content"><div class="inner"><!-- INFORMER AND SEARCH, TWO COLUMNS --><div id="two-cols-top"> <div id="informer" style="display: block;"><div class="inner"><iframe src="//search.supplyframe.com/partner/14/search/" scrolling="no" style="display: none !important;" width="735px" hidden="" height="333px" frameborder="0"></iframe></div></div></div><!-- CONTENT (NEWS AND UPDATES), TWO COLUMNS --><div id="article"><div class="inner"><div class="category">Разное</div><p class="path-link"><a href="http://www.radioradar.net/" title="RadioRadar - Радиоэлектроника, даташиты, схемы">Главная</a>&nbsp;<img src="%D0%9A%D0%B0%D0%BA%20%D0%B2%D1%8B%D0%B1%D1%80%D0%B0%D1%82%D1%8C%20%D0%B8%D0%BB%D0%B8%20%D0%B8%D0%B7%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20USB-%D1%85%D0%B0%D0%B1%20-%20RadioRadar_files/icon_latest_reply.gif" alt="" width="11" height="11">&nbsp;<a href="http://www.radioradar.net/radiofan/index.html" title="Радиолюбительские схемы, разработки, технологии">Радиолюбителю</a>&nbsp;<img src="%D0%9A%D0%B0%D0%BA%20%D0%B2%D1%8B%D0%B1%D1%80%D0%B0%D1%82%D1%8C%20%D0%B8%D0%BB%D0%B8%20%D0%B8%D0%B7%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20USB-%D1%85%D0%B0%D0%B1%20-%20RadioRadar_files/icon_latest_reply.gif" alt="" width="11" height="11">&nbsp;<a href="http://www.radioradar.net/radiofan/miscellaneous/index.html" title="Разное">Разное</a></p><div id="icons"><a title="Нашли ошибку? Сообщите нам ..." href="http://www.radioradar.net/send_mistake.php?content_id=9281" onclick="openPopup(this, 600, 400); return false;"><img alt="Нашли ошибку? Сообщите нам ..." src="%D0%9A%D0%B0%D0%BA%20%D0%B2%D1%8B%D0%B1%D1%80%D0%B0%D1%82%D1%8C%20%D0%B8%D0%BB%D0%B8%20%D0%B8%D0%B7%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20USB-%D1%85%D0%B0%D0%B1%20-%20RadioRadar_files/ico_mistake.gif" width="22" height="16" border="0"></a><a title="Комментировать: Как выбрать или изготовить USB-хаб" href="#comment"><img alt="Комментировать: Как выбрать или изготовить USB-хаб" src="%D0%9A%D0%B0%D0%BA%20%D0%B2%D1%8B%D0%B1%D1%80%D0%B0%D1%82%D1%8C%20%D0%B8%D0%BB%D0%B8%20%D0%B8%D0%B7%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20USB-%D1%85%D0%B0%D0%B1%20-%20RadioRadar_files/ico_coment.gif" width="22" height="16" border="0"></a><a title="Распечатать: Как выбрать или изготовить USB-хаб" target="_blank" href="http://www.radioradar.net/print.html?content_id=9281"><img alt="Распечатать: Как выбрать или изготовить USB-хаб" src="%D0%9A%D0%B0%D0%BA%20%D0%B2%D1%8B%D0%B1%D1%80%D0%B0%D1%82%D1%8C%20%D0%B8%D0%BB%D0%B8%20%D0%B8%D0%B7%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20USB-%D1%85%D0%B0%D0%B1%20-%20RadioRadar_files/ico_print.gif" width="22" height="16" border="0"></a></div><h1>Как выбрать или изготовить USB-хаб</h1><br><p></p><hr><p></p><p>Сегодня
 для подключения периферийных устройств к компьютеру чаще всего 
используют интерфейс USB. Но рано или поздно пользователь обнаруживает, 
что все имеющиеся в его компьютере USB-порты заняты мышью, клавиатурой, 
WEB-камерой и другими устройствами, а вновь приобретённый принтер, 
TV-тюнер, USB-осциллограф или что-либо ещё подключить некуда. Как же 
соединить с компьютером 127 устройств, обещанных спецификацией USB?</p> <p>Чтобы
 к одному USB-порту компьютера можно было подключить более одного 
устройства, применяют хабы (англ. hub - ступица колеса, в которую 
вставлены все его спицы), называемые также концентраторами. Хаб имеет 
"восходящий" (upstream) USB-порт, соединяемый с компьютером, и несколько
 "нисходящих" (downstream) USB-портов, к которым присоединяют 
периферийные устройства. Спецификация USB допускает последовательное 
соединение до пяти хабов.</p> <p>В магазинах, торгующих компьютерной 
периферией, ассортимент USB-хабов довольно велик - на любой вкус, цвет и
 кошелёк. Казалось бы, выбирай любой, наиболее симпатичного дизайна с 
нужным числом портов и за минимальную цену. Ведь неискушённый 
пользователь часто представляет себе хаб чем-то вроде устройства для 
подключения двух телевизоров к одной антенне - внутри пара резисторов 
либо миниатюрный трансформатор.</p> <p>Однако в данном случае всё 
гораздо сложнее. В этом я убедился, когда приобрёл два USB-хаба, один - 
для цифрового интерфейса к трансиверу, второй - для подключения внешнего
 жёсткого диска к стационарному ПК. Первый хаб на четыре порта с 
логотипом "DNS" был приобретён в обычном магазине, второй - неизвестного
 производителя на семь портов - был заказан в зарубежном 
интернет-магазине.</p> <p>Эксперименты в лабораторных условиях показали,
 что оба хаба без проблем работают с мышью, клавиатурой, адаптером 
USB-COM и звуковой картой, оснащённой интерфейсом USB. Однако с внешним 
жёстким диском и FLASH-накопителем работает только хаб DNS. При 
подключении таких устройств через безымянный хаб компьютер выдаёт 
сообщение "USB-устройство не определено".</p> <p>Дополнительные 
эксперименты с цифровым интерфейсом трансивера показали, что хаб DNS и 
здесь работает без проблем, а вот использование безымянного хаба 
приводит к "зависанию" компьютера при каждом включении передатчика. При 
непосредственном без хаба подключении адаптера USB-COM и внешней 
звуковой карты к компьютеру всё работало без проблем.</p> <p>Такая 
ситуация меня заинтересовала. Я решил выяснить, чем же различаются эти 
два хаба. Почему один полностью выполняет свои функции, а второй, в 
принципе, работает, но не всегда и не со всеми устройствами?</p> <p>Каково
 же было моё удивление, когда после вскрытия корпусов выяснилось, что 
оба хаба собраны на одной и той же элементной базе и по абсолютно 
одинаковым схемам! Только в семипортовом установлены две одинаковые 
микросхемы-контроллера USB-хаба последовательно: к одному из четырёх 
нисходящих портов первого контроллера подключён восходящий порт второго 
аналогичного контроллера. Отключение второго контроллера путём 
перерезания печатных проводников ситуацию не изменило. Чтобы понять 
причину, пришлось знакомиться с основами устройства и работы шины USB.</p> <p>Первая
 спецификация USB 1.0 была опубликована в начале 1996 г., а осенью 1998 
г. появилась спецификация 1.1, устранившая проблемы, обнаруженные в 
первой редакции. Спецификация USB 1.1 определяет два режима передачи 
информации: низкоскоростной (LS - low-speed), работающий со скоростью до
 1,5 Мбит/с и полноскоростной (FS - Full-speed) с предельной скоростью 
12 Мбит/с.</p> <p>Весной 2000 г. была опубликована спецификация USB 2.0,
 предусматривающая 40-кратное повышение пропускной способности шины. В 
дополнение к двум ранее имевшимся скоростным режимам введён третий - 
высокоскоростной HS (High-speed), способный работать со скоростью до 480
 Мбит/с.</p> <p>В 2008 г. появился новый стандарт - USB 3.0 (Super 
Speed), coгласно которому скорость передачи доведена до 5 Гбит/с. 
Однако, чтобы достичь такой скорости, пришлось серьёзно изменить 
конструкцию разъёмов и кабелей, при этом полной совместимости с 
предыдущими версиями достичь не удалось. Этот интерфейс целесообразно 
использовать для связи с высокоскоростными жёсткими дисками, если 
требуется частая пересылка файлов большого объёма. Но за ним, 
несомненно, будущее.</p> <p>С логотипом "USB 2.0" связан один тонкий 
момент. Хотя предельная пропускная способность этого интерфейса 480 
Мбит/с, в спецификации заложена и возможность его работы в режимах LS и 
FS. Таким образом, пропускную способность 480 Мбит/с могут обеспечить 
только устройства, способные работать в режиме HS.</p> <p>Разработчики 
USB рекомендуют использовать логотип "USB 2.0" только для HS-устройств, 
но на рынке свои законы и многие производители используют этот логотип и
 для FS-устройств, удовлетворяющих, по сути, лишь спецификации USB 1.1. 
Другими словами, надпись на упаковке "USB 2.0" ещё ни о чём не говорит. 
Устройства, полностью удовлетворяющие этой спецификации, должны иметь 
маркировку "USB 2.0 HI-SPEED" и явное указание на возможность работы со 
скоростью 480 Мбит/с.</p> <p>Сигнал, передаваемый по линии связи со 
скоростью 480 Мбит/с, представляет собой прямоугольные импульсы, 
следующие с частотой до 480 МГц. Любому мало-мальски сведущему в 
радиотехнике человеку понятно, что для неискажённой передачи 
прямоугольных импульсов такой частоты необходимо при разработке печатной
 платы жёстко соблюдать требования к волновому сопротивлению линий 
передачи между микросхемами и разъёмами и его постоянству по всей длине 
линии.</p> <p>Волновое сопротивление двухпроводной дифференциальной 
сигнальной линии на плате должно быть 90 Ом ± 10%. Линия должна быть 
симметричной, а расстояние между ней и другими печатными проводниками на
 плате - не менее пятикратного расстояния между проводниками линии. Под 
ними с обратной стороны платы на всём протяжении должен быть сплошной 
слой фольги - экран (общий провод). Участки линии, на которых эти 
требования не выполняются (например, подходы к выводам микросхем или к 
контактам разъёмов), должны быть минимальной длины.</p> <p>Типичные 
ошибки при трассировке таких линий связи показаны на рис. 1, где 1 - 
разрыв экрана под линией; 2 - отвод от проводника линии; 3 - 
непа-раллельность проводников и изменение зазора между ними; 4 - 
посторонний проводник рядом с линией.</p> <p style="text-align:center"><img alt="" src="%D0%9A%D0%B0%D0%BA%20%D0%B2%D1%8B%D0%B1%D1%80%D0%B0%D1%82%D1%8C%20%D0%B8%D0%BB%D0%B8%20%D0%B8%D0%B7%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20USB-%D1%85%D0%B0%D0%B1%20-%20RadioRadar_files/pic1.jpg" style="height:128px; width:200px"></p> <p style="text-align:center">Рис.1.</p> <p style="text-align:center"> </p> <p>Ну
 и, конечно, нужно соблюдать обычные требования к монтажу 
высокочастотных цепей. Все проводники должны быть минимальной длины, а 
блокировочные конденсаторы располагаться как можно ближе к 
соответствующим выводам микросхем.</p> <p>При взгляде на фотографии 
печатных плат покупных хабов видно, что в хабе DNS (рис. 2) эти 
требования более-менее соблюдены. Разработчики же безымянного хаба (рис.
 3) применили в нём одностороннюю печатную плату, поэтому волновое 
сопротивление линий связи сильно отличается от стандартных 90 Ом и 
наблюдается высокая чувствительность к электромагнитным помехам.</p> <p style="text-align:center"><img alt="" src="%D0%9A%D0%B0%D0%BA%20%D0%B2%D1%8B%D0%B1%D1%80%D0%B0%D1%82%D1%8C%20%D0%B8%D0%BB%D0%B8%20%D0%B8%D0%B7%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20USB-%D1%85%D0%B0%D0%B1%20-%20RadioRadar_files/pic2.jpg" style="height:400px; width:360px"></p> <p style="text-align:center">Рис. 2.</p> <p style="text-align:center"> </p> <p style="text-align:center"><img alt="" src="%D0%9A%D0%B0%D0%BA%20%D0%B2%D1%8B%D0%B1%D1%80%D0%B0%D1%82%D1%8C%20%D0%B8%D0%BB%D0%B8%20%D0%B8%D0%B7%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20USB-%D1%85%D0%B0%D0%B1%20-%20RadioRadar_files/pic3.jpg" style="height:513px; width:360px"></p> <p style="text-align:center">Рис. 3.</p> <p style="text-align:center"> </p> <p>В
 обоих хабах использованы одинаковые микросхемы-контроллеры USB-хаба 
FE1.1s. Сайт их производителя http:// www.jfd-ic.com/ доступен, к 
сожалению, только на китайском языке. Возможная схема включения этой 
микросхемы показана на рис. 4. Она отличается от типовой отсутствием 
светодиодных индикаторов активных портов и дополнительной микросхемы 
энергонезависимой памяти. Подробнее с характеристиками и особенностями 
микросхемы FE1.1s можно ознакомиться в [1] (на английском языке).</p> <p style="text-align:center"><img alt="" src="%D0%9A%D0%B0%D0%BA%20%D0%B2%D1%8B%D0%B1%D1%80%D0%B0%D1%82%D1%8C%20%D0%B8%D0%BB%D0%B8%20%D0%B8%D0%B7%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20USB-%D1%85%D0%B0%D0%B1%20-%20RadioRadar_files/pic4.jpg" style="height:507px; width:400px"></p> <p style="text-align:center">Рис. 4.</p> <p style="text-align:center"> </p> <p>Чтобы
 проверить предположение, что плохая работа хаба вызвана игнорированием 
требований спецификации USB к топологии печатной платы, я разработал 
свой вариант платы. Чертёж печатных проводников на её условно верхней 
стороне изображён на рис. 5. Фольга на нижней стороне сохранена 
полностью, за исключением зенковки отверстий для выводов деталей, не 
соединяющихся с общим проводом. Расположение деталей на обеих сторонах 
платы - на рис. 6. В переходные отверстия (они показаны залитыми) 
вставлены отрезки лужёного провода, пропаянные с обеих сторон платы.</p> <p style="text-align:center"><img alt="" src="%D0%9A%D0%B0%D0%BA%20%D0%B2%D1%8B%D0%B1%D1%80%D0%B0%D1%82%D1%8C%20%D0%B8%D0%BB%D0%B8%20%D0%B8%D0%B7%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20USB-%D1%85%D0%B0%D0%B1%20-%20RadioRadar_files/pic5.jpg" style="height:330px; width:400px"></p> <p style="text-align:center">Рис. 5.</p> <p style="text-align:center"> </p> <p style="text-align:center"><img alt="" src="%D0%9A%D0%B0%D0%BA%20%D0%B2%D1%8B%D0%B1%D1%80%D0%B0%D1%82%D1%8C%20%D0%B8%D0%BB%D0%B8%20%D0%B8%D0%B7%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20USB-%D1%85%D0%B0%D0%B1%20-%20RadioRadar_files/pic6.jpg" style="height:259px; width:650px"></p> <p style="text-align:center">Рис. 6.</p> <p style="text-align:center"> </p> <p>Геометрические
 размеры сигнальных линий для получения требуемого волнового 
сопротивления рассчитаны с помощью программы TX-LINE [2]. Она бесплатна и
 доступна для скачивания после регистрации на сайте. Программа не 
требует инсталляции, работа с ней интуитивно понятна.</p> <p>Запустив 
программу и перейдя на вкладку связанных микрополосковых линий (coupled 
MS line), следует выбрать материал проводников линии - медь (copper), 
ввести диэлектрическую проницаемость (dielectric constant) 
стеклотекстолита, равную 5,5, и размеры линии. При толщине 
стеклотекстолита 1 мм, ширине печатных проводников 0,7 мм, расстоянии 
между ними 0,5 мм и толщине фольги 0,02 мм получаем на частоте 500 МГц 
волновое сопротивление около 93 Ом.</p> <p>Все предназначенные для 
поверхностного монтажа пассивные элементы - типоразмера 1206 или 0805. 
Оксидные конденсаторы C1, C3, С5, кварцевый резонатор ZQ1 и разъём 
внешнего питания XS5 смонтированы со стороны сплошной фольги, остальные 
элементы - со стороны печатных проводников.</p> <p>Если хаб будет 
использоваться только как пассивный (все подключённые к нему устройства 
будут получать питание от компьютера), то диод VD1 можно заменить 
перемычкой. При подключении к хабу устройств, потребляющих более 500 мА,
 питания от компьютера будет недостаточно. В этом случае перемычку 
следует удалить и, не устанавливая диод VD1, подключить к разъёму XS5 
источник стабилизированного напряжения 5 В необходимой мощности.</p> <p>Для
 эксплуатации хаба как в пассивном, так и в активном режиме без перепаек
 диод с барьером Шотки VD1 в нём должен быть установлен. Он исключит 
попадание напряжения внешнего блока питания в USB-порт компьютера.</p> <p>В
 принципе, для уменьшения толщины платы все детали можно разместить со 
стороны печатных проводников, но без металлизации отверстий это 
усложняет монтаж. Если необходимо, можно изменить размеры платы и 
расположение разъёмов uSb, немного скорректировав рисунок печатных 
проводников.</p> <p>Микросхему FE1.1 s я выпаял из своего семипортового 
хаба, но в Интернете её можно приобрести и отдельно. Это один из 
немногих контроллеров USB-хаба, выпускаемых в корпусе SSOP-28 с шагом 
выводов 0,64 мм. Плата под такой корпус вполне может быть изготовлена 
методом термопереноса рисунка на фольгу.</p> <p>Испытывая изготовленный 
хаб, я обнаружил, что влияние электромагнитного излучения полностью 
исчезло, два из четырёх его портов великолепно работают с 
FLASH-накопителем и с жёстким диском с интерфейсом USB, но два других - 
только с мышью.</p> <p>Пришлось выпаять из семипортового хаба второй 
контроллер и заменить им первый на самодельной плате. Теперь полноценно 
заработали три порта из четырёх. Причём перестал работать в режиме HS 
тот порт, который с первым контроллером функционировал без проблем.</p> <p>В
 документации на микросхему FE1.1 s сказано, что все её экземпляры после
 изготовления проходят выходной контроль. Очевидно, бракованные 
экземпляры отправляются не в мусор, а к безымянным производителям. Либо 
контроллер имеет какие-то недокументированные варианты исполнения. Так 
или иначе, вариант с тремя полноценными портами USB 2.0 меня устроил.</p> <p>Обращаю
 внимание, что практически все дешёвые хабы с разъёмом для подключения 
внешнего блока питания не имеют никакой развязки между цепями внешнего и
 внутреннего питания. Контакты питания всех разъёмов просто соединены 
между собой. В результате есть шанс вывести из строя USB-порт 
компьютера, подав на него напряжение внешнего блока питания, 
подключённого к хабу.</p> <p>Если к приобретённому хабу предполагается 
подключение внешнего блока питания, нужно вскрыть корпус хаба и 
перерезать проводник, идущий от контакта 1 разъёма восходящего порта 
(того, который соединяют с компьютером). Для сохранения возможности 
использования хаба в пассивном режиме в это место можно впаять диод 
аналогично VD1 на схеме рис. 4. Он должен быть с барьером Шотки (для 
уменьшения падения напряжения) и с допустимым прямым током не менее 1 А.</p> <p>Согласно
 спецификации USB 2.0, соединительный кабель должен быть обязательно 
экранированным. При покупке кабеля бывает, однако, сложно определить, 
есть в нём экран или нет. Единственное, что может свидетельствовать о 
наличии экрана - маркировка "USB 2.0 High Speed" на кабеле. Косвенным 
признаком служат помехоподавляющие ферритовые "защёлки" на его концах.</p> <p>Однако
 ни маркировка, ни защёлки ничего не говорят о качестве экрана. В 
хорошем кабеле он должен быть из фольги, обёрнутой вокруг жгута 
проводов, поверх которой надет плетёный медный "чулок". Нередко 
производители удешевляют производство, используя вместо полноценного 
экрана несколько омеднённых стальных жил.</p> <p>Качество экрана можно 
оценить, измерив сопротивление между металлическими корпусами разъёмов 
на обоих концах кабеля. Если оно близко к нулю, в кабеле полноценный 
медный экран. Если сопротивление 3...4 Ом и более - экран есть, но он из
 стальных проволок. Такой кабель обычно тоньше, но его использование в 
условиях электромагнитных помех может приводить к сбоям компьютера. 
Например, когда рядом с кабелем лежит сотовый телефон или поблизости 
работает любительский трансивер.</p> <p>Если сопротивление между 
корпусами разъёмов бесконечно, значит, кабель не экранирован и для 
работы в режиме High Speed непригоден. В любом случае корпус разъёма не 
должен соединяться ни с одним из его контактов. Никакие самостоятельные 
пайки, сращивание проводов, экранирование или замена разъёмов в кабеле 
недопустимы.</p> <p>Самый надёжный критерий выбора - прозрачная внешняя 
оболочка кабеля, через которую отчётливо просматривается качественная 
экранирующая оплётка. А если при этом на обоих концах имеются ферритовые
 защёлки, то такой кабель смело можно отнести к категории PRO.</p> <p>Подытоживая сказанное, сформулирую основные критерии выбора хаба USB 2.0 для высокоскоростного обмена информацией:</p> <p style="margin-left:40px">- приобретать хаб лучше в розничном магазине, заранее оговаривая возможность его возврата или обмена на другую модель;</p> <p style="margin-left:40px">-
 на упаковку и корпус хаба должны быть нанесены логотип "USB 2.0 High 
Speed" и явное указание на возможность работы со скоростью 480 Мбит/с;</p> <p style="margin-left:40px">-
 сразу после покупки (а по возможности до неё) следует проверить работу 
всех портов хаба с высокоскоростным устройством, например с 
FLASH-накопителем USB 2.0;</p> <p style="margin-left:40px">- если для 
подключения устройств к хабу или хаба к компьютеру планируется 
использование соединительных кабелей, предпочтение лучше отдать тем 
хабам, у которых все разъёмы смонтированы на плате, поскольку торчащие 
"хвостики" с разъёмами почти наверняка не имеют экранов. В результате 
один конец экрана кабеля окажется никуда не подключённым, что может 
привести к сбоям при работе в режиме High Speed;</p> <p style="margin-left:40px">-
 если предполагается использовать хаб с внешним блоком питания, будьте 
готовы к тому, что потребуется доработка хаба, описанная выше;</p> <p style="margin-left:40px">-
 никакой защиты от перегрузки в дешёвых хабах нет, чтобы там ни было 
написано на упаковке. Предполагается, что она имеется в USB-портах 
компьютера. Полноценный хаб с защитой от перегрузки - это уже совсем 
другая ценовая категория;</p> <p style="margin-left:40px">- приобретайте
 высококачественный экранированный кабель с надписью "High Speed" на 
нём, по возможности с прозрачной внешней оболочкой.</p> <p>Если ни одна из продаваемых моделей хабов не устраивает, сделайте его сами, как описано выше.</p> <p>ЛИТЕРАТУРА</p> <p>1.
 FE1.1s USB 2.0 High Speed 4-Port Hub Controller. - URL: 
http://www.jfd-ic.com/ Documents/FEI. 1 s%2oData%20Sheet%20 
(Rev.%201.0).pdf (13.08.14).</p> <p>2. TX-LINE: Transmission Line 
Calculator. - URL: http://www.awrcorp.com/products/ 
optional-products/tx-line-transmission-line-calculator (13.08.14).</p> <p>Файл печатной платы в формате Sprint Layout 6.0 имеется <a href="ftp://ftp.radio.ru/pub/2014/11/hub.zip">здесь</a></p> <p style="text-align:right">Автор: Н. Хлюпин, г. Киров</p> <p></p><br><div style="text-align: right;" class="content"><span class="strong-analog">Дата публикации: </span>19.11.2014</div><div id="opinions"><div class="inner"><a name="comment"></a><h6>Мнения читателей</h6><ul><li><span class="strong-analog">Antimonil</span> / <span class="date">03.12.2017 - 19:20</span><br>Автор
 ты черт гребаный, ни на схеме ни в файле *.lay не стоИт маркировка 
первой ножки микросхемы, развел оказалась зеркальной, с@%ка 
предупреждать надо.</li><li><span class="strong-analog">Дмитрий</span> / <span class="date">03.02.2017 - 15:33</span><br>Уважаемый
 автор, правильно ли было рассчитывать волновое сопротивление при помощи
 вкладки связанных микрополосковых линий (coupled MS line)? Разве по 
этим двум проводникам распространяются разные не сигналы (прием и 
передача)? На Ваш взгляд не было бы правильнее рассчитывать во вкладке 
Microstrip?</li><li><span class="strong-analog">Роман</span> / <span class="date">09.03.2015 - 13:22</span><br>Заморочился
 созданием хаба на сей микрухе. Новые, непаяные, заказал у 
производителя. Есть баг, пока не прошьешь ИДдевайса и ИД производителя в
 ЕЕПРОМ - иначе, чем через еще 1 хаб комп не хочет работать. Вот 
играемся, будем шить еепромину. skype meffistoffel_romansv8</li></ul><br><p><span class="strong-analog">Вы можете оставить свой комментарий, мнение или вопрос по приведенному вышематериалу:</span></p><fieldset><form method="POST" action="/radiofan/miscellaneous/select_make_usb_hub.html#comment" onsubmit="return CheckCommentForm(this)"><label for="commname">Имя<span class="orange">*</span> </label><br><input id="commname" name="name" maxlength="100" type="text"><br><br><label for="comment">Текст<span class="orange">*</span> </label><br><textarea name="text" id="comment" cols="70" rows="14"></textarea><br><br><div class="g-recaptcha" data-sitekey="6LezXR0UAAAAAIBtDtFDY06_i7-qyed9vJepe4Yc"><div style="width: 304px; height: 78px;"><div><iframe src="https://www.google.com/recaptcha/api2/anchor?ar=1&amp;k=6LezXR0UAAAAAIBtDtFDY06_i7-qyed9vJepe4Yc&amp;co=aHR0cDovL3d3dy5yYWRpb3JhZGFyLm5ldDo4MA..&amp;hl=en&amp;v=v1531759913576&amp;size=normal&amp;cb=vq23fmy15k0c" role="presentation" scrolling="no" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-top-navigation allow-modals allow-popups-to-escape-sandbox" width="304" height="78" frameborder="0"></iframe></div><textarea id="g-recaptcha-response" name="g-recaptcha-response" class="g-recaptcha-response" style="width: 250px; height: 40px; border: 1px solid #c1c1c1; margin: 10px 25px; padding: 0px; resize: none;  display: none; "></textarea></div></div><br><input class="button" name="SubmitComment" value="Добавить" type="submit"> &nbsp;<input class="button" value="Очистить" type="reset"></form></fieldset></div></div><div class="clr"></div><br></div></div><div class="clr"></div><br><br><p class="c-adv"></p></div></div></div><!-- FOOTER --><div id="footer"><div class="inner"><div id="footer-left"><div class="inner"><p class="up"><a href="#top">наверх</a></p><ul id="f-menu-bold"><li><a href="http://www.radioradar.net/sitemap/index.html">Карта сайта</a></li><li><a href="http://www.radioradar.net/en/index.html">English version</a></li></ul><ul id="f-menu"><li><a href="http://www.radioradar.net/news/index.html" title="Новости электроники, радиотехники, электронных компонентов">Новости</a></li><li><a href="http://www.radioradar.net/about_project/index.html" title="Радиотехника и электроника - RadioRadar">Опроекте</a></li><li><a href="http://www.radioradar.net/links/index.html" title="Ссылки на тематические ресурсы">Ссылки</a></li><li><a href="http://www.radioradar.net/contacts/index.html" title="Контакты сайта RadioRadar">Контакты</a></li><li><a href="http://supplyframe.com/company/privacy#cookie-policy" target="_blank" title="Политика конфиденциальности">Конфиденциальность</a> </li></ul></div></div><div id="footer-right"><div class="inner"><img src="%D0%9A%D0%B0%D0%BA%20%D0%B2%D1%8B%D0%B1%D1%80%D0%B0%D1%82%D1%8C%20%D0%B8%D0%BB%D0%B8%20%D0%B8%D0%B7%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20USB-%D1%85%D0%B0%D0%B1%20-%20RadioRadar_files/logo_footer.png" alt="RadioRadar" title="RadioRadar" width="209" height="75"><p>©2003—2018&nbsp;<a href="http://www.radioradar.net/" title="RadioRadar - Радиоэлектроника, даташиты, схемы">Radioradar.net</a></p></div></div></div></div></div></div><div class="clr"></div><div align="center"><span class="strong-analog">RadioRadar.net - datasheet, service manuals, схемы, электроника, компоненты, semiconductor,САПР, CAD, electronics</span></div><div class="clr"></div><script type="text/javascript">!function(e,a,n,t,i,c,o){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,c=a.createElement(n),o=a.getElementsByTagName(n)[0],c.async=1,c.src="//www.google-analytics.com/analytics.js",o.parentNode.insertBefore(c,o)}(window,document,"script",0,"ga"),ga("create","UA-2100450-1","radioradar.net"),ga("require","linkid","linkid.js"),ga("send","pageview");</script><script defer="defer" type="text/javascript" onload="init()" src="%D0%9A%D0%B0%D0%BA%20%D0%B2%D1%8B%D0%B1%D1%80%D0%B0%D1%82%D1%8C%20%D0%B8%D0%BB%D0%B8%20%D0%B8%D0%B7%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20USB-%D1%85%D0%B0%D0%B1%20-%20RadioRadar_files/main.js"></script><div style="background-color: #fff; border: 1px solid #ccc; box-shadow: 2px 2px 3px rgba(0, 0, 0, 0.2); position: absolute; left: 0px; top: -10000px; transition: visibility 0s linear 0.3s, opacity 0.3s linear; opacity: 0; visibility: hidden; z-index: 2000000000;"><div style="width: 100%; height: 100%; position: fixed; top: 0px; left: 0px; z-index: 2000000000; background-color: #fff; opacity: 0.05;  filter: alpha(opacity=5)"></div><div class="g-recaptcha-bubble-arrow" style="border: 11px solid transparent; width: 0; height: 0; position: absolute; pointer-events: none; margin-top: -11px; z-index: 2000000000;"></div><div class="g-recaptcha-bubble-arrow" style="border: 10px solid transparent; width: 0; height: 0; position: absolute; pointer-events: none; margin-top: -10px; z-index: 2000000000;"></div><div style="z-index: 2000000000; position: relative;"><iframe title="recaptcha challenge" src="%D0%9A%D0%B0%D0%BA%20%D0%B2%D1%8B%D0%B1%D1%80%D0%B0%D1%82%D1%8C%20%D0%B8%D0%BB%D0%B8%20%D0%B8%D0%B7%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20USB-%D1%85%D0%B0%D0%B1%20-%20RadioRadar_files/bframe.html" style="width: 100%; height: 100%;" scrolling="no" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-top-navigation allow-modals allow-popups-to-escape-sandbox" name="ddwxsvgcamef" frameborder="0"></iframe></div></div></body></html>